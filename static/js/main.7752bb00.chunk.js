(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{159:function(e,t,n){e.exports=n(363)},164:function(e,t,n){},170:function(e,t,n){},363:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(19),s=n.n(i),o=(n(164),n(155)),c=n(9),l=n.n(c),u=n(18),m=n(67),p=n(140),h=n(141),d=n(142),f=n(156),g=n(143),v=n(157),b=n(47),S=n.n(b),w=n(68),y=n.n(w),E=n(149),x=n.n(E),k=n(27),C=n.n(k),O=n(97),N=n.n(O),T=n(145),j=n.n(T),I=n(147),A=n.n(I),M=n(148),q=n.n(M),D=n(38),Y=n.n(D),F=n(98),L=n.n(F),P=n(150),B=n.n(P),W=n(151),R=n.n(W),V=n(23),z=n.n(V),G=n(48),_=n.n(G),J=n(22),U=n.n(J),H=n(41),Q=n.n(H),Z=n(152),$=n.n(Z),K=n(99),X=n.n(K),ee=n(153),te=n.n(ee),ne=n(368),ae=n(369),re=n(365),ie=n(367),se=n(366),oe=n(40),ce=n.n(oe),le=(n(169),n(170),n(154)),ue=n(364),me=n(144),pe=n.n(me),he=["https://sheets.googleapis.com/$discovery/rest?version=v4"],de=new Promise(function(e){pe()("https://apis.google.com/js/api.js",function(){window.gapi.load("client:auth2",function(){return e(window.gapi)})})}),fe={getSession:function(){var e=Object(u.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de;case 2:return t=e.sent,e.next=5,t.client.init({apiKey:"AIzaSyB6G-3wgN7eBBJak-rl6EVvtkAmvSC5wVA",clientId:"626897179786-u8rj411ic3irrm9lp5poj1gi0q8ckurf.apps.googleusercontent.com",discoveryDocs:he,scope:"https://www.googleapis.com/auth/spreadsheets"});case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},ge="140eV5SZXTdnmZNM4lRVSAN6_zc4Upc-cchG8nNroo9E",ve=["employee","item","gender","price","paymentStatus","client","commisson","date"],be=["name","price"],Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe;return{all:function(){var t=Object(u.a)(l.a.mark(function t(){var n,a,r,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSession();case 2:return n=t.sent,t.next=5,n.client.sheets.spreadsheets.values.get({spreadsheetId:ge,range:"entrada!A2:H"});case 5:return a=t.sent,r=a.result.values||[],i=r.filter(function(e){return e.some(function(e){return e})}).map(function(e){var t={};return ve.forEach(function(n,a){var r="price"===n||"commisson"===n;t[n]=r?Number(e[a]):e[a]}),t}),t.abrupt("return",i);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),fetchItems:function(){var t=Object(u.a)(l.a.mark(function t(){var n,a,r,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSession();case 2:return n=t.sent,t.next=5,n.client.sheets.spreadsheets.values.get({spreadsheetId:ge,range:"servicos!A2:B"});case 5:return a=t.sent,r=a.result.values||[],i=r.filter(function(e){return e.some(function(e){return e})}).map(function(e){var t={};return be.forEach(function(n,a){var r=("price"===n||"commisson"===n)&&!ue.a(e[a]);t[n]=r?Number(e[a]):e[a]}),t}),t.abrupt("return",i);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addAll:function(){var t=Object(u.a)(l.a.mark(function t(n){var a,r,i,s;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSession();case 2:return a=t.sent,r={spreadsheetId:ge,range:"entrada!A1:B",valueInputOption:"USER_ENTERED"},i=n.map(function(e){return[e.employee,e.item,e.gender,e.price,e.paymentStatus,e.client,e.commisson,e.date]}),s={majorDimension:"ROWS",range:"entrada!A1:B",values:i},t.next=8,a.client.sheets.spreadsheets.values.append(r,s);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},we={isSignedIn:function(){var e=Object(u.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.getSession();case 2:return t=e.sent,e.abrupt("return",t.auth2.getAuthInstance().isSignedIn.get());case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),listen:function(){var e=Object(u.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.getSession();case 2:e.sent.auth2.getAuthInstance().isSignedIn.listen(t);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),signIn:function(){var e=Object(u.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.getSession();case 2:e.sent.auth2.getAuthInstance().signIn();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),signOut:function(){var e=Object(u.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.getSession();case 2:e.sent.auth2.getAuthInstance().signOut();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()};ce()().locale("pt");var ye={employee:"",item:"",price:"",client:"",gender:"",commisson:"",paymentStatus:"",quantity:1,date:ce()().format("YYYY-MM-DDThh:mm")},Ee=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={transactionToSubmit:ye,transactions:[],items:[],isLoading:!0,isMessageOpen:!1},n.showMessage=function(){n.setState({isMessageOpen:!0})},n.handleClose=function(e,t){"clickaway"!==t&&n.setState({isMessageOpen:!1})},n.reset=function(){n.setState({transactionToSubmit:ye})},n.updateSigninStatus=function(e){n.setState({isSignedIn:e}),e&&(n.fetchTransactions(),n.fetchItems())},n.handleChange=function(e){return function(t){var a=t.target.value,r=Object(p.a)({},n.state.transactionToSubmit,Object(m.a)({},e,a));"item"===e&&a&&(r.price=n.state.items.find(function(e){return e.name===a}).price),n.setState({transactionToSubmit:r})}},n.handleSubmit=function(){var e=Object(u.a)(l.a.mark(function e(t){var a,r,i,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=ne.a(ae.a)(n.state.transactionToSubmit.quantity),r=function(e){return re.a("date",ce()(e.date,"YYYY-MM-DDThh:mm").format("DD/MM/YYYY h:mm:ss"),e)},i=ie.a(a,se.a("quantity"),r),s=i(n.state.transactionToSubmit),e.prev=5,n.setState({isLoading:!0}),e.next=9,n.storeService.addAll(s);case 9:n.fetchTransactions(),n.reset(),n.showMessage(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),n.setState({error:e.t0.result.error});case 17:return e.prev=17,n.setState({isLoading:!1}),e.finish(17);case 20:case"end":return e.stop()}},e,this,[[5,14,17,20]])}));return function(t){return e.apply(this,arguments)}}(),n.fetchItems=Object(u.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.storeService.fetchItems();case 3:t=e.sent,n.setState({items:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({error:e.t0.result.error});case 10:case"end":return e.stop()}},e,this,[[0,7]])})),n.lastTransactions=function(){return Object(o.a)(n.state.transactions).reverse().slice(0,10)},n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.storeService=Se(window.gapi),e.next=3,we.isSignedIn();case 3:t=e.sent,this.setState({isLoading:!1}),we.listen(this.updateSigninStatus),this.updateSigninStatus(t);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleAuthClick",value:function(){we.signIn()}},{key:"handleSignoutClick",value:function(){we.signOut()}},{key:"fetchTransactions",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.storeService.all();case 3:t=e.sent,this.setState({transactions:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({error:e.t0.result.error});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return this.state.error?"Ocorreu um erro, edite diretamente na planilha ou tente mais tarde":this.state.isLoading?r.a.createElement("div",{className:e.progressWrapper},r.a.createElement(j.a,null)):this.state.isSignedIn?r.a.createElement("div",{className:"App"},r.a.createElement(A.a,{position:"fixed"},r.a.createElement(q.a,null,r.a.createElement(Y.a,{variant:"title",color:"inherit",className:e.flex},"Sal\xe3o (","0.1.0",")"),r.a.createElement(y.a,{color:"inherit",id:"signout_button",onClick:this.handleSignoutClick},"Sair"))),r.a.createElement("form",{className:e.container,onSubmit:this.handleSubmit,autoComplete:"off"},r.a.createElement(C.a,{required:!0,className:e.textField},r.a.createElement(N.a,{htmlFor:"item"},"Item"),r.a.createElement(x.a,{native:!0,value:this.state.transactionToSubmit.item,onChange:this.handleChange("item"),name:"item",inputProps:{id:"item"}},r.a.createElement("option",{value:""}),this.state.items.map(function(e){return r.a.createElement("option",{key:e.name,value:e.name},e.name)}))),r.a.createElement(S.a,{value:this.state.transactionToSubmit.price,label:"Pre\xe7o",type:"number",onChange:this.handleChange("price"),className:e.textField,required:!0}),r.a.createElement(S.a,{value:this.state.transactionToSubmit.quantity,label:"Quantidade",type:"number",inputProps:{required:!1,max:10,min:1},onChange:this.handleChange("quantity"),className:e.textField,required:!0}),r.a.createElement(C.a,{component:"fieldset",required:!0,className:e.textField},r.a.createElement(Q.a,{component:"legend"},"Colaborador"),r.a.createElement(_.a,{"aria-label":"employee",name:"employee",className:e.group,value:this.state.transactionToSubmit.employee,onChange:this.handleChange("employee")},r.a.createElement(U.a,{value:"Maurilio",control:r.a.createElement(z.a,{color:"primary",inputProps:{required:!0}}),label:"Maurilio"}),r.a.createElement(U.a,{value:"Victor",control:r.a.createElement(z.a,{color:"primary"}),label:"Victor"}))),r.a.createElement(C.a,{component:"fieldset",required:!0,className:e.textField},r.a.createElement(Q.a,{component:"legend"},"Comiss\xe3o"),r.a.createElement(_.a,{"aria-label":"commisson",name:"commisson",className:e.group,value:this.state.transactionToSubmit.commisson,onChange:this.handleChange("commisson")},r.a.createElement(U.a,{value:"20",control:r.a.createElement(z.a,{color:"primary",inputProps:{required:!0}}),label:"20%"}),r.a.createElement(U.a,{value:"30",control:r.a.createElement(z.a,{color:"primary"}),label:"30%"}))),r.a.createElement(C.a,{component:"fieldset",required:!0,className:e.textField},r.a.createElement(Q.a,{component:"legend"},"G\xeanero"),r.a.createElement(_.a,{"aria-label":"gender",name:"gender",className:e.group,value:this.state.transactionToSubmit.gender,onChange:this.handleChange("gender")},r.a.createElement(U.a,{value:"F",control:r.a.createElement(z.a,{color:"primary",inputProps:{required:!0}}),label:"Feminino"}),r.a.createElement(U.a,{value:"M",control:r.a.createElement(z.a,{color:"primary"}),label:"Masculino"}))),r.a.createElement(C.a,{component:"fieldset",required:!0,className:e.textField},r.a.createElement(Q.a,{component:"legend"},"Pagamento"),r.a.createElement(_.a,{"aria-label":"paymentStatus",name:"paymentStatus",className:e.group,value:this.state.transactionToSubmit.paymentStatus,onChange:this.handleChange("paymentStatus")},r.a.createElement(U.a,{value:"pago",control:r.a.createElement(z.a,{color:"primary",inputProps:{required:!0}}),label:"pago"}),r.a.createElement(U.a,{value:"deve",control:r.a.createElement(z.a,{color:"primary"}),label:"deve"}))),r.a.createElement(S.a,{value:this.state.transactionToSubmit.client,label:"Cliente",onChange:this.handleChange("client"),className:e.textField}),r.a.createElement(S.a,{value:this.state.transactionToSubmit.date,label:"Data",type:"datetime-local",onChange:this.handleChange("date"),className:e.textField}),r.a.createElement("br",null),r.a.createElement(y.a,{type:"submit",variant:"contained",color:"primary",className:e.submit},"Salvar")),r.a.createElement(Y.a,{variant:"title",color:"inherit",className:e.title},"\xdaltimas vendas"),r.a.createElement(L.a,null,this.lastTransactions().map(function(e,t){return r.a.createElement(B.a,{key:t},r.a.createElement(R.a,{primary:"".concat(e.item," por ").concat(e.employee," ").concat(ce()(e.date,"DD/MM/YYYY h:mm:ss").calendar()," ")}))})),r.a.createElement($.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.isMessageOpen,autoHideDuration:2e3,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},"Salvo com sucesso"),action:[r.a.createElement(X.a,{key:"close","aria-label":"Close",color:"inherit",className:e.close,onClick:this.handleClose},r.a.createElement(te.a,null))]})):r.a.createElement(y.a,{color:"primary",variant:"contained",size:"large",id:"authorize_button",onClick:this.handleAuthClick},"Entrar")}}]),t}(a.Component),xe=Object(le.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},group:{display:"flex",flexDirection:"row"},flex:{flexGrow:1},textField:{marginBottom:e.spacing.unit,marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"100%"},title:{marginTop:40,marginLeft:e.spacing.unit,marginRight:e.spacing.unit},submit:{marginTop:e.spacing.unit,marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"100%"},menu:{width:200},progressWrapper:{marginTop:"30%",textAlign:"center"}}})(Ee),ke=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ce(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(r.a.createElement(xe,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/salao",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/salao","/service-worker.js");ke?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ce(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Ce(e)})}}()}},[[159,2,1]]]);
//# sourceMappingURL=main.7752bb00.chunk.js.map